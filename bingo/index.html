<!DOCTYPE html>
<html lang="en">
<head>
  <meta name="google-site-verification" content="MD90Yss8t7VRGIyZQYEGNS4SPkazpoqRJhn-KvPxnT4" />
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <meta name="description" content="Metrobots 3324 - FIRST Robotics Team">
  <meta name="keywords" content="Metrobots, FIRST Robotics, Team 3324, Robotics">

  <title>Bingo</title>

  <link rel="apple-touch-icon" sizes="180x180" href="https://metrobots.github.io/assets/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://metrobots.github.io/assets/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://metrobots.github.io/assets/favicon/favicon-16x16.png">
  <link rel="manifest" href="https://metrobots.github.io/assets/favicon/site.webmanifest">
  <link rel="mask-icon" href="https://metrobots.github.io/assets/favicon/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#333333">
  <meta name="theme-color" content="#ffffff">

  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: system-ui, sans-serif;
      background: #fafafa;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 16px;
    }

    h1 {
      font-size: 2rem;
      margin-bottom: 8px;
      color: #111;
    }

    .stats {
      display: flex;
      gap: 16px;
      margin-bottom: 12px;
      font-size: 0.85rem;
      color: #666;
      text-align: center;
    }

    /* BOARD */

    #board {
      width: 100%;
      max-width: 520px;
      max-height: min(520px, 75vh);
      aspect-ratio: 1 / 1;
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 6px;
      margin-bottom: 16px;
    }

    .cell {
      background: #fff;
      border: 2px solid #ddd;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 8px;
      font-size: 0.8rem;
      font-weight: 500;
      color: #333;
      cursor: pointer;
      user-select: none;
      min-height: 56px;
      transition: background 0.15s, border-color 0.15s, transform 0.15s;
    }

    .cell.marked {
      background: #2563eb;
      border-color: #2563eb;
      color: #fff;
    }

    .cell.winning {
      background: #16a34a;
      border-color: #16a34a;
      animation: highlight 0.4s ease;
    }

    @keyframes highlight {
      50% { transform: scale(1.05); }
    }

    @media (hover: hover) and (pointer: fine) {
      .cell:hover:not(.marked) {
        background: #f5f5f5;
        border-color: #999;
      }
    }

    @media (max-width: 420px) {
      .cell {
        font-size: 0.7rem;
        padding: 6px;
      }
    }

    /* CONTROLS */

    .controls {
      width: 100%;
      max-width: 520px;
      display: flex;
      gap: 10px;
      justify-content: center;
    }

    button {
      flex: 1;
      min-height: 44px;
      padding: 10px 14px;
      font-size: 0.9rem;
      font-weight: 500;
      border-radius: 8px;
      border: 1px solid #ddd;
      background: #fff;
      color: #333;
      cursor: pointer;
      touch-action: manipulation;
      transition: background 0.15s, border-color 0.15s;
    }

    @media (hover: hover) and (pointer: fine) {
      button:hover {
        background: #f5f5f5;
        border-color: #999;
      }
    }

    button:active {
      background: #eee;
    }

    @media (max-width: 480px) {
      .controls {
        flex-direction: column;
      }

      button {
        width: 100%;
      }
    }

    /* MODAL */

    .modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }

    .modal-content {
      background: #fff;
      padding: 24px;
      width: 90%;
      max-width: 360px;
      max-height: 85vh;
      overflow-y: auto;
      border-radius: 10px;
      text-align: center;
    }

    .modal h2 {
      font-size: 1.8rem;
      margin-bottom: 8px;
    }

    .modal p {
      margin-bottom: 16px;
      color: #666;
    }

    .modal button {
      background: #2563eb;
      border-color: #2563eb;
      color: #fff;
    }

    /* CONFETTI */

    .confetti {
      position: fixed;
      pointer-events: none;
    }

    @keyframes confetti-fall {
      to {
        transform: translateY(100vh) rotate(1080deg);
        opacity: 0;
      }
    }

    @media (prefers-reduced-motion: reduce) {
      .confetti {
        animation: none !important;
      }

      .cell.winning {
        animation: none;
      }
    }
  </style>
</head>

<body>
  <h1>Bingo</h1>

  <div class="stats">
    <div>Marked: <strong><span id="markedCount">1</span>/25</strong></div>
    <div>Wins: <strong><span id="winCount">0</span></strong></div>
  </div>

  <div id="board"></div>

  <div class="controls">
    <button id="newBoard">New Board</button>
    <button id="resetMarks">Reset Marks</button>
    <button id="shareBtn">Share Board</button>
  </div>

  <div id="winModal" class="modal">
    <div class="modal-content">
      <h2>Bingo!</h2>
      <p>You completed a line</p>
      <button onclick="closeModal()">Continue</button>
    </div>
  </div>

  <script>
    const OPTIONS = [
      "Re-imagine the past","Technical difficulties","FLL/FTC mentioned",
      "WATER GAME","REBUILT name not relevant at all","Dozer mentioned",
      "Someone makes a \"Rebuilt\" pun","Animated robots break game rules",
      "HAAS advertisement","Space Force advertisement",
      "Game uses past year's game pieces","Game uses fully new game pieces",
      "Game is shooter focused","Game is pick-and-place focused",
      "Mark Rober appears","Will.I.Am appears","Game has some sort of terrain",
      "Dean Kamen hits table with his hand","Game manual leaks early",
      "Game manual site crashes","Game piece names are Rock/Fossil/Gem related",
      "Awkward broadcast close-ups","Archaeologist speaks",
      "Game has crowd interaction","Student interviews"
    ];

    const boardEl = document.getElementById("board");
    const markedCountEl = document.getElementById("markedCount");
    const winCountEl = document.getElementById("winCount");
    const winModal = document.getElementById("winModal");

    let cells = [];
    let hasWon = false;
    let winCount = 0;

    function mulberry32(seed) {
      return function () {
        let t = seed += 0x6D2B79F5;
        t = Math.imul(t ^ t >>> 15, t | 1);
        t ^= t + Math.imul(t ^ t >>> 7, t | 61);
        return ((t ^ t >>> 14) >>> 0) / 4294967296;
      };
    }

    function shuffle(arr, rng) {
      const a = [...arr];
      for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(rng() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }

    function getSeed() {
      const p = new URLSearchParams(location.search);
      return p.has("seed") ? parseInt(p.get("seed"), 10) : Math.floor(Math.random() * 1e9);
    }

    function setSeed(seed) {
      const url = new URL(location);
      url.searchParams.set("seed", seed);
      history.replaceState(null, "", url);
    }

    function generateBoard(seed) {
      boardEl.innerHTML = "";
      cells = [];
      hasWon = false;

      const rng = mulberry32(seed);
      const picks = shuffle(OPTIONS, rng).slice(0, 25);
      picks[12] = "FREE";

      picks.forEach((text, i) => {
        const cell = document.createElement("div");
        cell.className = "cell";
        cell.textContent = text;
        if (i === 12) cell.classList.add("marked");

        cell.addEventListener("click", () => {
          if (navigator.vibrate) navigator.vibrate(10);
          cell.classList.toggle("marked");
          updateStats();
          checkWin();
        });

        boardEl.appendChild(cell);
        cells.push(cell);
      });

      updateStats();
    }

    function updateStats() {
      markedCountEl.textContent =
        cells.filter(c => c.classList.contains("marked")).length;
    }

    function checkWin() {
      if (hasWon) return;

      const marked = cells.map(c => c.classList.contains("marked"));
      const lines = [
        [0,1,2,3,4],[5,6,7,8,9],[10,11,12,13,14],
        [15,16,17,18,19],[20,21,22,23,24],
        [0,5,10,15,20],[1,6,11,16,21],[2,7,12,17,22],
        [3,8,13,18,23],[4,9,14,19,24],
        [0,6,12,18,24],[4,8,12,16,20]
      ];

      const win = lines.find(line => line.every(i => marked[i]));
      if (!win) return;

      hasWon = true;
      winCountEl.textContent = ++winCount;
      win.forEach(i => cells[i].classList.add("winning"));
      launchConfetti();
      setTimeout(() => winModal.style.display = "flex", 300);
    }

    function closeModal() {
      winModal.style.display = "none";
    }

    function launchConfetti() {
      const colors = ["#ff6b6b","#ffd93d","#6bcf7f","#4ecdc4","#45b7d1","#a855f7"];
      for (let i = 0; i < 120; i++) {
        setTimeout(() => {
          const c = document.createElement("div");
          c.className = "confetti";
          c.style.left = Math.random() * 100 + "%";
          c.style.top = "-10px";
          c.style.width = c.style.height = Math.random() * 8 + 6 + "px";
          c.style.background = colors[Math.floor(Math.random() * colors.length)];
          c.style.animation =
            `confetti-fall ${Math.random() * 3 + 2}s ease-out forwards`;
          document.body.appendChild(c);
          setTimeout(() => c.remove(), 4000);
        }, i * 12);
      }
    }

    document.getElementById("newBoard").onclick = () => {
      const seed = Math.floor(Math.random() * 1e9);
      setSeed(seed);
      generateBoard(seed);
    };

    document.getElementById("resetMarks").onclick = () => {
      hasWon = false;
      cells.forEach((c, i) => {
        c.classList.remove("marked", "winning");
        if (i === 12) c.classList.add("marked");
      });
      updateStats();
    };

    document.getElementById("shareBtn").onclick = () => {
      navigator.clipboard.writeText(location.href);
    };

    const seed = getSeed();
    setSeed(seed);
    generateBoard(seed);
  </script>
</body>
</html>
